<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Instant English</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Outfit:wght@400;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4f46e5">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <div style="width: 100%; display: flex; justify-content: space-between; align-items: flex-start;">
            <!-- Timer -->
            <div
                style="display: flex; align-items: center; gap: 0.5rem; background: white; padding: 0.5rem 1rem; border-radius: var(--radius-full); box-shadow: var(--shadow-sm);">
                <button id="timer-toggle-btn" class="btn btn-secondary"
                    style="border: none; background: transparent; padding: 0; display: flex; align-items: center; justify-content: center; width: 24px; height: 24px;">
                    <svg id="timer-icon-play" xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" class="hidden">
                        <polygon points="5 3 19 12 5 21 5 3"></polygon>
                    </svg>
                    <svg id="timer-icon-pause" xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <rect x="6" y="4" width="4" height="16"></rect>
                        <rect x="14" y="4" width="4" height="16"></rect>
                    </svg>
                </button>
                <span id="study-timer"
                    style="font-family: monospace; font-size: 1.1rem; color: var(--primary-color);">00:00</span>
                <button id="timer-reset-btn" class="btn btn-secondary"
                    style="border: none; background: transparent; padding: 0; display: flex; align-items: center; justify-content: center; width: 24px; height: 24px; margin-left: 0.25rem;"
                    title="Reset Timer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
                        <path d="M3 3v5h5"></path>
                    </svg>
                </button>
            </div>

            <div style="display: flex; align-items: center; gap: 0.75rem;">
                <!-- Question Counter -->
                <div
                    style="display: flex; align-items: center; gap: 0.5rem; background: white; padding: 0.5rem 1rem; border-radius: var(--radius-full); box-shadow: var(--shadow-sm);">
                    <span style="font-size: 0.9rem; color: var(--text-muted);">Q:</span>
                    <span id="question-counter"
                        style="font-family: monospace; font-size: 1.1rem; color: var(--accent-color);">0</span>
                    <button id="counter-reset-btn" class="btn btn-secondary"
                        style="border: none; background: transparent; padding: 0; display: flex; align-items: center; justify-content: center; width: 24px; height: 24px; margin-left: 0.25rem;"
                        title="Reset Counter">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
                            <path d="M3 3v5h5"></path>
                        </svg>
                    </button>
                </div>

                <!-- Settings Button -->
                <button id="settings-btn" class="btn btn-secondary"
                    style="width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: var(--shadow-sm); padding: 0;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path
                            d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
                        </path>
                        <circle cx="12" cy="12" r="3"></circle>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Flashcard (centered) -->
        <div style="flex: 1; display: flex; align-items: center; justify-content: center; width: 100%;">
            <div id="flashcard" class="fade-in"
                style="width: 100%; background: var(--card-bg); border-radius: var(--radius-lg); padding: 2rem; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; box-shadow: var(--shadow-lg); backdrop-filter: blur(10px); position: relative; overflow: hidden;">
                <div style="margin-bottom: 2rem; width: 100%;">
                    <p
                        style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em;">
                        Japanese</p>
                    <p id="japanese-text" style="font-size: 1.5rem; font-weight: 700; line-height: 1.4;">Loading...</p>
                </div>

                <div style="width: 100%; position: relative;">
                    <p
                        style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em;">
                        English</p>
                    <div
                        style="position: relative; min-height: 3rem; display: flex; align-items: center; justify-content: center; gap: 0.75rem;">
                        <p id="english-text" class="text-display blur-text"
                            style="font-size: 1.25rem; font-weight: 500; color: var(--secondary-text); transition: all 0.3s ease; flex: 1;">
                            Loading...
                        </p>
                        <button id="speak-btn" class="btn btn-secondary hidden"
                            style="width: 40px; height: 40px; border-radius: 50%; padding: 0; display: flex; align-items: center; justify-content: center; flex-shrink: 0;"
                            title="Read aloud">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                                <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                                <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Controls (at bottom) -->
        <div style="width: 100%; display: flex; gap: 1rem;">
            <button id="hint-btn" class="btn btn-secondary full-width"
                style="padding: 1rem; border-radius: var(--radius-lg); font-size: 1.1rem; box-shadow: var(--shadow-md);">
                Hint
            </button>
            <button id="answer-btn" class="btn btn-primary full-width"
                style="padding: 1rem; border-radius: var(--radius-lg); font-size: 1.1rem; box-shadow: var(--shadow-md);">
                Answer
            </button>
            <button id="next-btn" class="btn btn-accent full-width hidden"
                style="padding: 1rem; border-radius: var(--radius-lg); font-size: 1.1rem; box-shadow: var(--shadow-md);">
                Next Question
            </button>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Settings</h2>
                <button id="close-settings" class="btn btn-secondary"
                    style="width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; padding: 0;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 0.5rem; font-size: 0.9rem; color: var(--text-muted);">
                    Edit CSV Data directly. Format: Japanese,English<br>
                    Example: <code>こんにちは,Hello</code>
                </p>
                <div style="margin-bottom: 0.5rem;">
                    <input type="file" id="csv-file" accept=".csv" style="width: 100%; font-size: 0.9rem;">
                </div>
                <textarea id="csv-input" placeholder="こんにちは,Hello&#10;さようなら,Goodbye"></textarea>
                <div style="margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                    <input type="checkbox" id="random-order-check">
                    <label for="random-order-check" style="user-select: none; cursor: pointer;">Random Order
                        (ランダム出題)</label>
                </div>
                <button id="save-data-btn" class="btn btn-primary full-width">Save & Reload</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>